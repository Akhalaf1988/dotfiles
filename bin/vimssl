#! /usr/bin/env bash

readonly AWK="/bin/awk"
readonly VIM="/usr/bin/vim"
readonly GREP="/bin/grep"
readonly LS="/bin/ls"
readonly MKDIR="/bin/mkdir"
readonly TAIL="/usr/bin/tail"

_makedir(){
if [[ -z "$W" ]]; then
sudo -u "$U" "$MKDIR" -p .well-known/pki-validation \
&& "$VIM" .well-known/pki-validation/"$F"
else
P="$(sudo -u "$U" "$LS" .well-known \
| "$GREP" pki-validation)"
   if [[ -z "$P" ]]; then
   sudo -u "$U" "$MKDIR" -p .well-known/pki-validation \
&& "$VIM" .well-known/pki-validation/"$F"
else
sudo -u "$U" "$VIM" .well-known/pki-validation/"$F"
  fi
 fi
}

if [[ -z "$@" ]]; then
    read -p "File Name?: " F;
    else
        F="$@";
    fi;
W="$("$LS" -a \
| "$GREP" .well-known)"
U="$(pwd \
| cut -d/ -f3)"
T="$(ls -la \
| "$GREP" .well-known \
| "$AWK" '{print $3}' \
| "$TAIL")"


if [[ "$T" == "root" ]]; then
chown -R "$U". .well-known
   _makedir
else
   _makedir
fi
